<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [tsrpc](./tsrpc.md) &gt; [BaseServer](./tsrpc.baseserver.md)

## BaseServer class

<b>Signature:</b>

```typescript
export declare abstract class BaseServer<ServiceType extends BaseServiceType = BaseServiceType> 
```

## Constructors

|  Constructor | Modifiers | Description |
|  --- | --- | --- |
|  [(constructor)(proto, options)](./tsrpc.baseserver._constructor_.md) |  | Constructs a new instance of the <code>BaseServer</code> class |

## Properties

|  Property | Modifiers | Type | Description |
|  --- | --- | --- | --- |
|  [\_gracefulStop?](./tsrpc.baseserver._gracefulstop.md) |  | { rs: () =&gt; void; } | <i>(Optional)</i> |
|  [\_pendingApiCallNum](./tsrpc.baseserver._pendingapicallnum.md) |  | number |  |
|  [\_status](./tsrpc.baseserver._status.md) |  | ServerStatus |  |
|  [ApiCallClass](./tsrpc.baseserver.apicallclass.md) |  | { new (options: any): [ApiCall](./tsrpc.apicall.md)<!-- -->; } |  |
|  [flows](./tsrpc.baseserver.flows.md) |  | { readonly postConnectFlow: Flow&lt;[BaseConnection](./tsrpc.baseconnection.md)<!-- -->&lt;ServiceType&gt;&gt;; readonly postDisconnectFlow: Flow&lt;{ conn: [BaseConnection](./tsrpc.baseconnection.md)<!-- -->&lt;ServiceType&gt;; reason?: string \| undefined; }&gt;; readonly preRecvBufferFlow: Flow&lt;{ conn: [BaseConnection](./tsrpc.baseconnection.md)<!-- -->&lt;ServiceType&gt;; buf: Uint8Array; }&gt;; readonly preSendBufferFlow: Flow&lt;{ conn: [BaseConnection](./tsrpc.baseconnection.md)<!-- -->&lt;ServiceType&gt;; buf: Uint8Array; call?: [ApiCall](./tsrpc.apicall.md)<!-- -->&lt;any, any, any&gt; \| undefined; }&gt;; readonly preApiCallFlow: Flow&lt;[ApiCall](./tsrpc.apicall.md)<!-- -->&lt;any, any, any&gt;&gt;; readonly preApiReturnFlow: Flow&lt;{ call: [ApiCall](./tsrpc.apicall.md)<!-- -->; return: ApiReturn&lt;any&gt;; }&gt;; readonly postApiReturnFlow: Flow&lt;{ call: [ApiCall](./tsrpc.apicall.md)<!-- -->; return: ApiReturn&lt;any&gt;; }&gt;; readonly postApiCallFlow: Flow&lt;[ApiCall](./tsrpc.apicall.md)<!-- -->&lt;any, any, any&gt;&gt;; readonly preMsgCallFlow: Flow&lt;[MsgCall](./tsrpc.msgcall.md)<!-- -->&lt;any, any&gt;&gt;; readonly postMsgCallFlow: Flow&lt;[MsgCall](./tsrpc.msgcall.md)<!-- -->&lt;any, any&gt;&gt;; readonly preSendMsgFlow: Flow&lt;{ conn: [BaseConnection](./tsrpc.baseconnection.md)<!-- -->&lt;ServiceType&gt;; service: MsgService; msg: any; }&gt;; readonly postSendMsgFlow: Flow&lt;{ conn: [BaseConnection](./tsrpc.baseconnection.md)<!-- -->&lt;ServiceType&gt;; service: MsgService; msg: any; }&gt;; } | Flows 所有 Pre Flows 可以中断后续流程 所有 Post Flows 不中断后续流程 |
|  [logger](./tsrpc.baseserver.logger.md) |  | Logger |  |
|  [MsgCallClass](./tsrpc.baseserver.msgcallclass.md) |  | { new (options: any): [MsgCall](./tsrpc.msgcall.md)<!-- -->; } |  |
|  [options](./tsrpc.baseserver.options.md) |  | BaseServerOptions&lt;ServiceType&gt; |  |
|  [proto](./tsrpc.baseserver.proto.md) |  | ServiceProto&lt;ServiceType&gt; |  |
|  [serviceMap](./tsrpc.baseserver.servicemap.md) |  | ServiceMap |  |
|  [status](./tsrpc.baseserver.status.md) |  | ServerStatus |  |
|  [tsbuffer](./tsrpc.baseserver.tsbuffer.md) |  | TSBuffer |  |

## Methods

|  Method | Modifiers | Description |
|  --- | --- | --- |
|  [\_makeCall(conn, input)](./tsrpc.baseserver._makecall.md) |  |  |
|  [\_onApiCall(call)](./tsrpc.baseserver._onapicall.md) |  |  |
|  [\_onInputBufferError(errMsg, conn, buf)](./tsrpc.baseserver._oninputbuffererror.md) |  | When the server cannot parse input buffer to api/msg call By default, it will return "Input Buffer Error" . |
|  [\_onInternalServerError(err, call)](./tsrpc.baseserver._oninternalservererror.md) |  | On error throwed inside (not TsrpcError) By default, it will return a "Internal server error". If <code>returnInnerError</code> is <code>true</code>, an <code>innerError</code> field would be returned. |
|  [\_onMsgCall(call)](./tsrpc.baseserver._onmsgcall.md) |  |  |
|  [\_onRecvBuffer(conn, buf)](./tsrpc.baseserver._onrecvbuffer.md) |  |  |
|  [\_setDefaultFlowOnError()](./tsrpc.baseserver._setdefaultflowonerror.md) |  |  |
|  [autoImplementApi(apiPath, apiNamePrefix)](./tsrpc.baseserver.autoimplementapi.md) |  |  |
|  [gracefulStop(maxWaitTime)](./tsrpc.baseserver.gracefulstop.md) |  | 优雅的停止 立即停止接收所有请求，直到所有现有请求都处理完，停止服务 |
|  [implementApi(apiName, handler)](./tsrpc.baseserver.implementapi.md) |  |  |
|  [listenMsg(msgName, handler)](./tsrpc.baseserver.listenmsg.md) |  |  |
|  [processUncaughtException(logger)](./tsrpc.baseserver.processuncaughtexception.md) | <code>static</code> |  |
|  [start()](./tsrpc.baseserver.start.md) |  | Start server |
|  [stop()](./tsrpc.baseserver.stop.md) |  | Wait all requests finished and the stop server |
|  [unlistenMsg(msgName, handler)](./tsrpc.baseserver.unlistenmsg.md) |  |  |

